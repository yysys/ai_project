# 界面设计文件使用说明

## 文件说明

`界面设计.json` 是一个结构化的界面设计文件，包含了"猪了个猪"游戏的所有界面设计规范。虽然这不是Figma的专有格式（.fig），但它包含了所有必要的信息，可以直接用于前端开发。

## 文件结构

### 1. Document（文档）
- `version`: 版本号
- `document`: 文档信息
  - `id`: 文档ID
  - `name`: 文档名称
  - `pages`: 页面列表

### 2. Pages（页面）
每个页面包含：
- `id`: 页面ID
- `name`: 页面名称
- `frames`: 框架列表

### 3. Frames（框架）
每个框架代表一个屏幕或弹窗：
- `id`: 框架ID
- `name`: 框架名称
- `width`: 宽度（px）
- `height`: 高度（px）
- `backgroundColor`: 背景色
- `children`: 子元素列表

### 4. Components（组件）
可复用的组件定义：
- `unit`: 单位组件（菜狗/狼）
- `button`: 按钮组件
- `progressBar`: 进度条组件
- `modal`: 弹窗组件

### 5. Styles（样式）
全局样式定义：
- `colors`: 颜色系统
- `typography`: 字体系统
- `spacing`: 间距系统
- `borderRadius`: 圆角系统
- `shadow`: 阴影系统

### 6. Animations（动画）
动画定义：
- `unitClick`: 单位点击动画
- `unitRun`: 单位跑动动画
- `unitDisappear`: 单位消失动画
- `modalShow`: 弹窗显示动画
- `buttonPress`: 按钮点击动画

### 7. Responsive（响应式）
响应式设计定义：
- `breakpoints`: 断点
- `adaptations`: 适配方案

### 8. CodeGeneration（代码生成）
代码生成配置：
- `framework`: 框架（抖音小程序）
- `language`: 语言（JavaScript）
- `components`: 组件模板

## 如何使用

### 方法1：直接用于前端开发

前端开发人员可以直接读取JSON文件，根据其中的定义编写代码：

```javascript
// 读取设计文件
const designData = require('./docs/figma/界面设计.json');

// 获取颜色
const primaryPink = designData.styles.colors.primary.pink;

// 获取组件定义
const unitComponent = designData.components.unit;

// 获取动画定义
const unitClickAnimation = designData.animations.unitClick;
```

### 方法2：转换为Figma格式

虽然无法直接创建.figma文件，但可以使用以下工具：

1. **Figma Plugin**
   - 安装"JSON to Figma"插件
   - 导入JSON文件
   - 自动生成Figma设计

2. **手动创建**
   - 在Figma中创建新文件
   - 按照JSON中的定义手动创建组件
   - 使用JSON中的颜色、字体、间距等样式

### 方法3：使用代码生成工具

可以使用以下工具将JSON转换为前端代码：

1. **前端代码生成器**
   ```bash
   # 安装代码生成工具
   npm install -g json-to-component
   
   # 生成组件代码
   json-to-component docs/figma/界面设计.json --output src/components
   ```

2. **抖音小程序代码生成**
   - 根据JSON定义生成小程序页面
   - 生成组件代码
   - 生成样式文件

## 组件示例

### 单位组件（Unit Component）

```javascript
// 根据JSON定义创建单位组件
Component({
  properties: {
    id: String,
    type: String, // 'vegetable_dog' or 'wolf'
    x: Number,
    y: Number,
    size: Number,
    direction: String, // 'left_up', 'left_down', 'right_up', 'right_down'
    state: String // 'idle', 'selected', 'running', 'disappeared'
  },

  data: {
    designData: require('../../docs/figma/界面设计.json')
  },

  methods: {
    handleClick() {
      this.triggerEvent('click', {
        id: this.properties.id,
        type: this.properties.type
      });
      
      // 播放点击动画
      this.animate('click');
    },

    render() {
      const { type, x, y, size, direction, state } = this.properties;
      const colors = this.data.designData.components.unit.props.colors;
      const unitColor = colors[type] || colors.wolf;
      
      return `
        <view 
          class="unit ${type} ${state}"
          style="left: ${x}px; top: ${y}px; width: ${size}px; height: ${size}px; background-color: ${unitColor};"
          bindtap="handleClick"
        >
          <view class="direction-indicator" style="transform: rotate(${this.data.designData.components.unit.props.directions[direction]}deg);">
            <image src="/assets/icons/arrow.png" style="width: 20px; height: 20px;" />
          </view>
        </view>
      `;
    }
  }
});
```

### 按钮组件（Button Component）

```javascript
Component({
  properties: {
    text: String,
    type: String, // 'primary', 'secondary', 'circle'
    onClick: Function,
    disabled: Boolean
  },

  data: {
    designData: require('../../docs/figma/界面设计.json')
  },

  methods: {
    handleClick() {
      if (this.properties.disabled) return;
      
      this.properties.onClick();
      
      // 播放点击动画
      this.animate('press');
    },

    render() {
      const { text, type, disabled } = this.properties;
      const buttonStyle = this.data.designData.components.button.props[type];
      
      return `
        <view 
          class="button ${type} ${disabled ? 'disabled' : ''}"
          style="width: ${buttonStyle.width}px; height: ${buttonStyle.height}px; background: ${buttonStyle.backgroundColor}; color: ${buttonStyle.color};"
          bindtap="handleClick"
        >
          <text style="font-size: ${buttonStyle.fontSize}px; font-weight: ${buttonStyle.fontWeight};">${text}</text>
        </view>
      `;
    }
  }
});
```

## 样式文件

根据JSON中的样式定义创建样式文件：

```css
/* colors.css */
:root {
  --primary-pink: #FF6B9D;
  --primary-pink-light: #FF8FB1;
  --primary-pink-dark: #E85A8A;
  
  --secondary-yellow: #FFD93D;
  --secondary-yellow-light: #FFE566;
  --secondary-yellow-dark: #E6C235;
  
  --background-main: #FFF5F8;
  --background-light: #FFF0F5;
  --background-dark: #FFE9F0;
  --background-game: #F0FFF4;
  
  --text-primary: #333333;
  --text-secondary: #666666;
  --text-tertiary: #999999;
  --text-white: #FFFFFF;
  
  --status-success: #52C41A;
  --status-warning: #FAAD14;
  --status-error: #F5222D;
  --status-info: #1890FF;
}

/* typography.css */
:root {
  --font-family: 'PingFang SC', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  
  --font-size-h1: 32px;
  --font-size-h2: 28px;
  --font-size-h3: 24px;
  --font-size-h4: 20px;
  --font-size-body-large: 18px;
  --font-size-body: 16px;
  --font-size-body-small: 14px;
  --font-size-caption: 12px;
  
  --font-weight-regular: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;
  
  --line-height-h1: 48px;
  --line-height-h2: 42px;
  --line-height-h3: 36px;
  --line-height-h4: 30px;
  --line-height-body-large: 27px;
  --line-height-body: 24px;
  --line-height-body-small: 21px;
  --line-height-caption: 18px;
}

/* spacing.css */
:root {
  --spacing-base: 8px;
  --spacing-component: 16px;
  --spacing-section: 24px;
  --spacing-page: 32px;
}

/* border-radius.css */
:root {
  --border-radius-small: 4px;
  --border-radius-medium: 8px;
  --border-radius-large: 16px;
  --border-radius-xlarge: 24px;
  --border-radius-circle: 9999px;
}

/* shadow.css */
:root {
  --shadow-small: 0 2px 8px rgba(0,0,0,0.1);
  --shadow-medium: 0 4px 12px rgba(0,0,0,0.15);
  --shadow-large: 0 8px 32px rgba(0,0,0,0.2);
}
```

## 页面结构

### 主页（Home Page）

```
┌─────────────────────────────────┐
│ 顶部信息栏（60px）          │
│ [标题] [关卡] [分数] [设置] │
├─────────────────────────────────┤
│                           │
│                           │
│      游戏区域（600px）        │
│                           │
│         [菜狗]             │
│                           │
│   [狼1]    [狼2]          │
│                           │
│       [狼3]               │
│                           │
├─────────────────────────────────┤
│ 底部操作栏（80px）          │
│ [排行榜] [开始游戏] [商店]  │
└─────────────────────────────────┘
```

### 游戏页（Game Page）

```
┌─────────────────────────────────┐
│ 游戏信息栏（60px）          │
│ [关卡] [计时器] [生命] [暂停] │
├─────────────────────────────────┤
│                           │
│                           │
│      游戏画布（652px）        │
│                           │
│         [菜狗]             │
│                           │
│   [狼1]    [狼2]          │
│                           │
│       [狼3]               │
│                           │
├─────────────────────────────────┤
│ 游戏控制栏（100px）         │
│ [提示] [重置] [慢动作]      │
└─────────────────────────────────┘
```

### 结果页（Result Page）

```
┌──────────────────┐
│  结果头部（60px） │
│    [胜利！]      │
├──────────────────┤
│  结果内容（200px）│
│  ⭐⭐⭐        │
│  得分：1000     │
│  用时：00:30     │
├──────────────────┤
│  结果底部（140px）│
│  [下一关]       │
│  [分享]         │
└──────────────────┘
```

## 动画实现

### 单位点击动画

```css
@keyframes unitClick {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.2); opacity: 1; }
  100% { transform: scale(1); opacity: 1; }
}

.unit.clicking {
  animation: unitClick 150ms cubic-bezier(0.4, 0, 0.2, 1);
}
```

### 单位跑动动画

```css
@keyframes unitRun {
  0% { transform: rotate(0deg); }
  25% { transform: rotate(5deg); }
  50% { transform: rotate(0deg); }
  75% { transform: rotate(-5deg); }
  100% { transform: rotate(0deg); }
}

.unit.running {
  animation: unitRun 0.5s linear infinite;
}
```

### 单位消失动画

```css
@keyframes unitDisappear {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.3); opacity: 0.5; }
  100% { transform: scale(0); opacity: 0; }
}

.unit.disappearing {
  animation: unitDisappear 300ms cubic-bezier(0.4, 0, 0.2, 1);
}
```

## 响应式适配

### 小屏幕（< 375px）

```css
@media (max-width: 374px) {
  .unit.dog {
    width: 70px;
    height: 70px;
  }
  
  .unit.wolf {
    width: 50px;
    height: 50px;
  }
  
  .button {
    width: 100px;
    height: 40px;
    font-size: 14px;
  }
}
```

### 中等屏幕（375px - 414px）

```css
@media (min-width: 375px) and (max-width: 414px) {
  .unit.dog {
    width: 80px;
    height: 80px;
  }
  
  .unit.wolf {
    width: 60px;
    height: 60px;
  }
  
  .button {
    width: 120px;
    height: 48px;
    font-size: 16px;
  }
}
```

### 大屏幕（> 414px）

```css
@media (min-width: 415px) {
  .unit.dog {
    width: 90px;
    height: 90px;
  }
  
  .unit.wolf {
    width: 70px;
    height: 70px;
  }
  
  .button {
    width: 140px;
    height: 56px;
    font-size: 18px;
  }
}
```

## 注意事项

1. **单位坐标系统**
   - 使用绝对定位（absolute positioning）
   - 原点在左上角
   - 单位中心点在(size/2, size/2)

2. **方向指示器**
   - 显示在单位右上角
   - 使用箭头图标指示方向
   - 根据方向角度旋转

3. **状态管理**
   - 使用状态机管理单位状态
   - 状态转换时播放相应动画
   - 状态变化时触发相应事件

4. **性能优化**
   - 使用对象池减少内存分配
   - 使用requestAnimationFrame进行动画
   - 避免频繁的DOM操作

5. **无障碍设计**
   - 确保所有交互元素都有适当的标签
   - 提供键盘导航支持
   - 确保颜色对比度符合标准

## 下一步

1. **创建Figma设计**
   - 使用JSON文件作为参考
   - 在Figma中创建完整的设计系统
   - 导出资源文件

2. **生成前端代码**
   - 根据JSON定义生成组件代码
   - 生成样式文件
   - 生成页面结构

3. **实现游戏逻辑**
   - 实现单位跑动机制
   - 实现边界检测
   - 实现胜利/失败条件

---

**文档版本**：v1.0
**最后更新**：2026-02-01
**负责人**：开发团队
