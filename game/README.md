# 拯救菜狗 - 抖音小游戏

一款轻松休闲的点击类抖音小游戏，玩家需要点击菜狗，让它沿着对角线方向跑出屏幕边界，同时避开狼群的阻挡。

## 游戏特色

- 🎮 简单易上手的点击操作
- 🐕 可爱的菜狗角色
- 🐺 多样的狼群挑战
- ⭐ 星级评定系统
- 🎯 丰富的关卡设计
- 🏆 成就和奖励系统

## 项目结构

```
game/
├── app.js                 # 小程序入口文件
├── app.json              # 小程序配置文件
├── app.wxss              # 全局样式文件
├── sitemap.json          # 站点地图配置
├── package.json          # 项目依赖配置
├── jest.config.js        # Jest测试配置
├── utils/                # 工具模块
│   ├── constants.js      # 常量定义
│   ├── unit.js           # 单位类定义
│   ├── unitManager.js    # 单位管理器
│   ├── levelManager.js   # 关卡管理器
│   ├── gameStateManager.js # 游戏状态管理器
│   └── gameEngine.js     # 游戏引擎
├── pages/                # 页面文件
│   ├── index/            # 主页
│   ├── level/            # 关卡选择页
│   ├── game/             # 游戏页
│   └── result/           # 结果页
└── tests/                # 测试文件
    ├── constants.test.js
    ├── unit.test.js
    ├── unitManager.test.js
    ├── levelManager.test.js
    └── gameStateManager.test.js
```

## 核心功能

### 游戏机制

1. **单位系统**
   - 菜狗：主角，位于屏幕中心
   - 狼：敌人，随机分布在周围
   - 每个单位都有预先定义的四个对角线方向之一

2. **跑动机制**
   - 点击单位后，单位会沿着预设方向跑动
   - 四个方向：左上、左下、右上、右下
   - 跑出屏幕边界即消失

3. **胜利条件**
   - 菜狗跑出屏幕边界即获胜

4. **失败条件**
   - 限时关卡中超时

### 关卡系统

- 10个精心设计的关卡
- 多种关卡类型：普通、限时、生存、挑战
- 星级评定系统（1-3星）
- 关卡解锁机制

### 数据持久化

- 游戏进度保存
- 关卡解锁状态
- 最高分记录
- 金币系统

## 技术栈

- **框架**: 微信小程序（兼容抖音小游戏）
- **语言**: JavaScript
- **测试**: Jest
- **渲染**: Canvas 2D

## 安装和运行

### 开发环境要求

- Node.js >= 14.0.0
- 微信开发者工具 或 抖音开发者工具

### 安装依赖

```bash
npm install
```

### 运行测试

```bash
npm test
```

### 在微信开发者工具中打开

1. 打开微信开发者工具
2. 选择"导入项目"
3. 选择 `game` 目录
4. 填写 AppID（可以使用测试号）
5. 点击"导入"

### 在抖音开发者工具中打开

1. 打开抖音开发者工具
2. 选择"导入项目"
3. 选择 `game` 目录
4. 填写 AppID
5. 点击"导入"

## 游戏玩法

1. **开始游戏**
   - 点击主页的"开始游戏"按钮
   - 进入关卡选择页面

2. **选择关卡**
   - 点击已解锁的关卡
   - 查看关卡信息

3. **游戏操作**
   - 点击屏幕上的单位（菜狗或狼）
   - 单位会沿着预设方向跑动
   - 策略性地点击，让菜狗跑出屏幕

4. **胜利条件**
   - 让菜狗跑出屏幕边界
   - 在限时关卡中在规定时间内完成

5. **失败条件**
   - 在限时关卡中超时

## 核心模块说明

### GameEngine（游戏引擎）

游戏的核心引擎，负责：
- 游戏循环管理
- 单位更新和渲染
- 碰撞检测
- 游戏状态管理

### UnitManager（单位管理器）

管理游戏中的所有单位：
- 创建和管理菜狗和狼
- 处理点击事件
- 更新单位位置
- 边界检测

### LevelManager（关卡管理器）

管理关卡系统：
- 关卡生成和配置
- 关卡解锁机制
- 星级评定
- 分数计算

### GameStateManager（游戏状态管理器）

管理游戏状态：
- 状态转换
- 暂停/继续
- 计时器管理
- 事件通知

## 测试

项目包含完整的单元测试：

```bash
# 运行所有测试
npm test

# 运行特定测试
npm test -- constants.test.js

# 生成测试覆盖率报告
npm test -- --coverage
```

## 性能优化

- 对象池技术
- 空间分区
- 帧率控制
- 懒加载

## 未来计划

- [ ] 添加更多关卡
- [ ] 实现成就系统
- [ ] 添加音效和背景音乐
- [ ] 实现排行榜
- [ ] 添加更多角色皮肤
- [ ] 实现社交分享功能

## 贡献指南

欢迎提交 Issue 和 Pull Request！

## 许可证

MIT License

## 联系方式

如有问题或建议，请联系开发团队。
