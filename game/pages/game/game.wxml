<view class="container">
  <view class="header">
    <view class="header-left">
      <button class="icon-btn" bindtap="goBack">
        <text class="material-symbols-outlined">arrow_back</text>
      </button>
    </view>
    <view class="header-center">
      <text class="level-title">{{levelName}}</text>
      <view class="level-info">
        <text class="material-symbols-outlined">pets</text>
        <text>让菜狗逃出格子</text>
      </view>
    </view>
    <view class="header-right">
      <button class="icon-btn" bindtap="showSettings">
        <text class="material-symbols-outlined">settings</text>
      </button>
    </view>
  </view>

  <view class="game-area">
    <view class="board-wrapper">
      <view class="parquet-grid">
        <view class="grid-background">
          <block wx:for="{{196}}" wx:key="index">
            <view class="grid-cell"></view>
          </block>
        </view>
        <view class="tiles-container">
          <block wx:for="{{tiles}}" wx:key="id">
            <view 
              wx:if="{{item.state !== 'disappeared'}}"
              class="tile {{item.type === 'horizontal' ? 'tile-h' : item.type === 'vertical' ? 'tile-v' : ''}} {{item.unitType === 'dog' ? 'tile-dog' : 'tile-wolf'}}"
              style="left: {{item.displayX}}px; top: {{item.displayY}}px; width: {{item.displayWidth}}px; height: {{item.displayHeight}}px; opacity: {{item.opacity}}; transform: rotate(0deg);"
              bindtap="handleTileTap"
              data-tile-id="{{item.id}}"
            >
              <view class="tile-content tile-direction-{{item.direction}}">
                <image 
                  class="unit-img" 
                  src="{{item.unitType === 'dog' ? dogImageUrl : wolfImageUrl}}"
                  mode="aspectFill"
                />
              </view>
            </view>
          </block>
        </view>
      </view>
    </view>
  </view>

  <view class="footer">
    <view class="footer-content">
      <button class="footer-btn" bindtap="handleUndo">
        <view class="btn-icon-wrapper">
          <text class="material-symbols-outlined">undo</text>
        </view>
        <text class="btn-text">撤销</text>
      </button>
      
      <button class="footer-btn main-btn" bindtap="handleHint">
        <view class="btn-icon-wrapper large">
          <text class="material-symbols-outlined">lightbulb</text>
        </view>
        <text class="btn-text">提示</text>
      </button>
      
      <button class="footer-btn" bindtap="handleReset">
        <view class="btn-icon-wrapper">
          <text class="material-symbols-outlined">refresh</text>
        </view>
        <text class="btn-text">重置</text>
      </button>
    </view>
  </view>
</view>
