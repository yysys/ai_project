# 开发者工具操作指南 - 拯救菜狗

## 📋 前置准备

### 已完成的修复
✅ 修复了 game.js 中的语法错误
✅ 所有96个单元测试全部通过
✅ 代码已推送到GitHub（commit: ee712ab）

### 项目位置
```
/Users/qinkuang.chen/traeProject/ai_project/game
```

## 🚀 方法一：微信开发者工具

### 步骤1：下载微信开发者工具

1. 访问官网：https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html
2. 下载对应你操作系统的版本
3. 安装并启动微信开发者工具

### 步骤2：登录微信开发者工具

1. 使用微信扫码登录
2. 或使用手机号登录

### 步骤3：导入项目

1. 点击工具栏的"导入项目"按钮
2. 在弹出的文件选择器中，导航到：`/Users/qinkuang.chen/traeProject/ai_project/game`
3. 选择 `game` 文件夹
4. 项目名称会自动填充为"拯救菜狗"
5. AppID选择：
   - 如果有正式AppID，填入
   - 如果没有，选择"测试号"或"小程序"
6. 点击"导入"按钮

### 步骤4：等待编译

1. 项目导入后会自动编译
2. 查看控制台（Console）是否有错误
3. 如果有错误，查看"调试指南"部分

### 步骤5：运行游戏

1. 在模拟器中会自动显示主页
2. 点击"开始游戏"按钮
3. 进入关卡选择页
4. 点击第1关
5. 开始游戏！

## 🚀 方法二：抖音开发者工具

### 步骤1：下载抖音开发者工具

1. 访问官网：https://developer.open-douyin.com/docs/resource/developer-docs/development-tool/mini-app/development-tool/update-and-download
2. 下载对应你操作系统的版本
3. 安装并启动抖音开发者工具

### 步骤2：登录抖音开发者工具

1. 使用抖音账号登录
2. 或使用手机号登录

### 步骤3：导入项目

1. 点击工具栏的"导入项目"按钮
2. 在弹出的文件选择器中，导航到：`/Users/qinkuang.chen/traeProject/ai_project/game`
3. 选择 `game` 文件夹
4. 项目名称会自动填充为"拯救菜狗"
5. 填入你的抖音小程序AppID
6. 点击"导入"按钮

### 步骤4：等待编译

1. 项目导入后会自动编译
2. 查看控制台（Console）是否有错误
3. 如果有错误，查看"调试指南"部分

### 步骤5：运行游戏

1. 在模拟器中会自动显示主页
2. 点击"开始游戏"按钮
3. 进入关卡选择页
4. 点击第1关
5. 开始游戏！

## 🎮 游戏操作指南

### 主页操作
1. **查看菜狗吉祥物**：屏幕中央有一个浮动的菜狗
2. **点击"开始游戏"**：进入关卡选择页
3. **点击设置**：显示"设置功能开发中"提示（预留功能）

### 关卡选择页操作
1. **查看关卡**：10个关卡以网格形式显示
2. **解锁状态**：
   - 第1关：已解锁（绿色）
   - 第2-10关：锁定（灰色）
3. **点击已解锁关卡**：进入游戏
4. **点击锁定关卡**：显示"关卡未解锁"提示

### 游戏页操作
1. **查看游戏界面**：
   - 顶部：关卡名称、时间显示（限时关卡）
   - 中间：游戏棋盘（45度旋转）
   - 菜狗：屏幕中心，金色边框
   - 狼群：随机分布在周围
   - 底部：操作按钮（撤销、提示、重置）

2. **点击单位**：
   - 点击菜狗或狼
   - 单位会沿预设方向跑动
   - 四个方向：左上、左下、右上、右下

3. **操作按钮**：
   - 暂停（⏸️）：暂停游戏
   - 继续（▶️）：继续游戏
   - 重置（🔄）：重置当前关卡
   - 返回（←）：返回关卡选择页

4. **胜利条件**：
   - 让菜狗跑出屏幕边界
   - 自动跳转到结果页

5. **失败条件**：
   - 限时关卡超时
   - 自动跳转到结果页

### 结果页操作
1. **胜利显示**：
   - 显示"🎉 过关成功！🎉"
   - 显示菜狗图片（脉冲动画）
   - 显示星级（1-3星）
   - 显示分数
   - 显示奖励（金币）

2. **失败显示**：
   - 显示"😢 游戏失败 😢"
   - 显示失败原因

3. **操作按钮**：
   - 返回首页：返回主页
   - 下一关：进入下一关（胜利时）
   - 重试：重新挑战当前关卡（失败时）

## 🔍 调试指南

### 查看控制台

1. **打开调试器**：
   - 微信开发者工具：点击右侧"调试器"标签
   - 抖音开发者工具：点击右侧"调试"标签

2. **查看Console输出**：
   - 游戏启动日志
   - 关卡加载日志
   - 点击事件日志
   - 游戏状态变化日志

### 常见错误及解决方案

#### 错误1：Canvas not found
**原因**：Canvas元素未正确初始化
**解决方案**：
1. 检查 game.wxml 中是否有 `<canvas type="2d" id="gameCanvas"></canvas>`
2. 检查 onReady 是否正确调用 createCanvas
3. 重新编译项目

#### 错误2：UnitType is not defined
**原因**：常量模块未正确导入
**解决方案**：
1. 检查 utils/constants.js 是否存在
2. 检查是否正确导入：`const { UnitType } = require('../../utils/constants');`
3. 重新编译项目

#### 错误3：gameEngine is null
**原因**：游戏引擎未正确初始化
**解决方案**：
1. 检查 initGameEngine 是否被正确调用
2. 检查 Canvas 是否正确创建
3. 重新编译项目

#### 错误4：页面跳转失败
**原因**：页面路径错误
**解决方案**：
1. 检查 app.json 中是否正确配置页面路径
2. 检查跳转路径是否正确：`/pages/game/game`
3. 重新编译项目

### 使用断点调试

1. **设置断点**：
   - 在代码行号左侧点击，设置断点
   - 断点会显示为红色圆点

2. **触发断点**：
   - 在模拟器中操作游戏
   - 当代码执行到断点时，会自动暂停

3. **查看变量**：
   - 在调试器右侧查看变量值
   - 鼠标悬停在变量上查看值

4. **单步执行**：
   - 使用调试器工具栏的按钮：
     - 单步进入（Step Into）
     - 单步跳过（Step Over）
     - 继续执行（Resume）

### 查看网络请求

1. **打开Network标签**：
   - 查看所有网络请求
   - 检查请求是否成功
   - 查看请求和响应数据

### 查看存储数据

1. **打开Storage标签**：
   - 查看本地存储的数据
   - 检查 gameProgress 是否正确保存
   - 可以手动清除存储数据

## 📊 性能监控

### 查看帧率

1. **打开Performance标签**：
   - 查看FPS（每秒帧数）
   - 目标：60 FPS
   - 如果FPS过低，检查是否有性能问题

### 查看内存使用

1. **打开Memory标签**：
   - 查看内存占用
   - 检查是否有内存泄漏
   - 长时间运行后观察内存变化

## 🐛 问题排查清单

### 如果游戏无法启动

- [ ] 检查 app.json 配置是否正确
- [ ] 检查 app.js 是否正确初始化
- [ ] 检查控制台是否有错误
- [ ] 重新导入项目

### 如果页面显示空白

- [ ] 检查 wxml 文件是否正确
- [ ] 检查 wxss 文件是否正确
- [ ] 检查 js 文件是否有语法错误
- [ ] 检查控制台错误信息
- [ ] 清除缓存重新编译

### 如果游戏无法点击

- [ ] 检查 Canvas 是否正确初始化
- [ ] 检查触摸事件是否正确绑定
- [ ] 检查 gameEngine 是否正确初始化
- [ ] 检查 handleClick 方法是否正确
- [ ] 查看控制台错误信息

### 如果关卡无法加载

- [ ] 检查 levelId 参数是否正确传递
- [ ] 检查 levelManager 是否正确初始化
- [ ] 检查关卡数据是否存在
- [ ] 查看控制台错误信息

### 如果游戏无法暂停/继续

- [ ] 检查 pauseGame 方法是否正确
- [ ] 检查 resumeGame 方法是否正确
- [ ] 检查 gameEngine.pause 方法是否正确
- [ ] 检查 gameEngine.resume 方法是否正确
- [ ] 查看控制台错误信息

## 📝 测试记录表

### 功能测试
| 测试项 | 测试结果 | 问题描述 | 解决方案 |
|--------|----------|----------|----------|
| 主页显示 | [ ] | | |
| 关卡选择 | [ ] | | |
| 游戏运行 | [ ] | | |
| 点击交互 | [ ] | | |
| 暂停/继续 | [ ] | | |
| 重置功能 | [ ] | | |
| 胜利判定 | [ ] | | |
| 失败判定 | [ ] | | |
| 数据保存 | [ ] | | |

### 性能测试
| 测试项 | 测试结果 | FPS | 内存占用 |
|--------|----------|-----|----------|
| 游戏启动 | [ ] | | |
| 游戏运行 | [ ] | | |
| 关卡切换 | [ ] | | |
| 长时间运行 | [ ] | | |

## 🎯 快速测试流程

### 完整测试流程

1. **启动游戏**
   - [ ] 打开开发者工具
   - [ ] 导入项目
   - [ ] 等待编译完成

2. **测试主页**
   - [ ] 查看菜狗吉祥物
   - [ ] 点击"开始游戏"
   - [ ] 跳转到关卡页

3. **测试关卡选择**
   - [ ] 查看第1关（已解锁）
   - [ ] 查看其他关卡（锁定）
   - [ ] 点击第1关
   - [ ] 进入游戏页

4. **测试游戏**
   - [ ] 查看菜狗和狼
   - [ ] 点击菜狗
   - [ ] 观察跑动效果
   - [ ] 等待菜狗跑出屏幕
   - [ ] 查看结果页

5. **测试结果**
   - [ ] 查看胜利提示
   - [ ] 查看星级评定
   - [ ] 查看分数
   - [ ] 点击"下一关"

6. **测试第2关**
   - [ ] 点击第2关
   - [ ] 开始游戏
   - [ ] 完成关卡

7. **测试暂停/继续**
   - [ ] 点击暂停按钮
   - [ ] 点击继续按钮
   - [ ] 继续游戏

8. **测试重置**
   - [ ] 点击重置按钮
   - [ ] 重新开始关卡

9. **测试返回**
   - [ ] 点击返回按钮
   - [ ] 确认退出
   - [ ] 返回关卡页

## 📞 联系支持

如果遇到无法解决的问题，请提供以下信息：

1. **问题描述**：详细描述问题
2. **复现步骤**：如何重现问题
3. **控制台错误**：Console中的错误信息
4. **截图**：问题界面的截图
5. **环境信息**：
   - 开发者工具版本
   - 操作系统版本
   - Node.js 版本

---

**文档版本**: v1.0
**最后更新**: 2026-02-09
**项目状态**: ✅ 所有测试通过，代码已推送到GitHub
